{
    "pluginAlias": "Blink",
    "pluginType": "platform",
    "singular": true,
    "schema": {
        "type": "object",
        "properties": {
            "name": {
                "title": "Name",
                "default": "Blink",
                "type": "string"
            },
            "username": {
                "title": "username",
                "type": "string",
                "description": "Legacy credential field. Optional when using the OAuth sign-in flow."
            },
            "password": {
                "title": "password",
                "type": "string",
                "description": "Legacy credential field. Optional when using the OAuth sign-in flow."
            },
            "pin": {
                "title": "PIN",
                "description": "The PIN sent during 2FA (leave blank on first use; enter after first auth attempt)",
                "type": "number"
            },
            "hardwareId": {
                "title": "Hardware ID",
                "type": "string",
                "description": "Device identifier used for Blink OAuth. Generated automatically during sign in.",
                "readOnly": true
            },
            "redirectPort": {
                "title": "Local listener port",
                "type": "integer",
                "default": 52888,
                "description": "Port used by the Homebridge host to capture the Blink OAuth callback."
            },
            "oauthClientId": {
                "title": "OAuth Client ID",
                "type": "string",
                "default": "ios",
                "description": "Identifier passed to Blink when requesting authorization codes."
            },
            "oauthScope": {
                "title": "OAuth Scope",
                "type": "string",
                "default": "client offline_access",
                "description": "Scopes requested during Blink OAuth authorization."
            },
            "signInStatus": {
                "title": "Sign-in status",
                "type": "string",
                "enum": [
                    "Not signed in",
                    "Signed in",
                    "Error"
                ],
                "default": "Not signed in",
                "readOnly": true
            },
            "accessToken": {
                "title": "Access Token",
                "type": "string",
                "readOnly": true
            },
            "refreshToken": {
                "title": "Refresh Token",
                "type": "string",
                "readOnly": true
            },
            "tokenExpiresAt": {
                "title": "Token Expiry (ms)",
                "type": "number",
                "readOnly": true
            },
            "accountId": {
                "title": "Blink Account ID",
                "type": "number",
                "readOnly": true
            },
            "clientId": {
                "title": "Blink Client ID",
                "type": "number",
                "readOnly": true
            },
            "region": {
                "title": "Blink Region",
                "type": "string",
                "readOnly": true
            },
            "ffmpegPath": {
                "title": "FFmpeg Path",
                "type": "string",
                "default": "/usr/bin/ffmpeg",
                "description": "Optional absolute path to ffmpeg binary. If empty, plugin will attempt /usr/bin/ffmpeg."
            },
            "hide-alarm": {
                "title": "Hide Alarm (Security System)",
                "placeholder": true,
                "description": "When combined with the arm switch (used or automation), the Security-System will have to be controlled by Blink App.",
                "type": "boolean"
            },
            "hide-manual-arm-switch": {
                "title": "Hide Sync Module Arm Switch",
                "placeholder": true,
                "description": "The Sync Module Arm switch allows for automations to arm / disarm all cameras associated with a sync module",
                "type": "boolean"
            },
            "hide-temperature-sensor": {
                "title": "Hide Camera Temperature Sensors",
                "placeholder": false,
                "type": "boolean"
            },
            "hide-enabled-switch": {
                "title": "Hide Camera Motion Enabled/Disable Switch",
                "placeholder": false,
                "type": "boolean"
            },
            "hide-privacy-switch": {
                "title": "Hide Camera Privacy-Mode Enable/Disable Switch",
                "placeholder": false,
                "description": "Privacy-Mode prevents thumbnails from refreshing when the Security-System is not armed. Disabling this switch will globally disable privacy-mode on all cameras.",
                "type": "boolean"
            },
            "enable-liveview": {
                "title": "Enable LiveView when clicking on a camera feed (experimental)",
                "placeholder": false,
                "description": "By default, the camera view will expose the last recorded motion. Enabling live view will enable the experimental liveview relay",
                "type": "boolean"
            },
            "disable-thumbnail-refresh": {
                "title": "Disable thumbnail auto-refresh",
                "default": false,
                "description": "By default, the thumbnails of the cameras will refresh when the camera is enabled, disabling the auto refresh keeps the default thumbnail untouched.",
                "type": "boolean"
            },
            "camera-thumbnail-refresh-seconds": {
                "title": "Camera Thumbnail Refresh (seconds)",
                "type": "integer",
                "minimum": 0,
                "placeholder": "3600",
                "description": "Force Thumbnail refresh every N seconds. If auto refresh is disabled, this value is ignored."
            },
            "camera-status-polling-seconds": {
                "title": "Status Polling (seconds)",
                "type": "integer",
                "minimum": 1,
                "placeholder": "30",
                "description": "Camera status does not update live and must be fetched periodically. By default this is done every 45 seconds"
            },
            "camera-motion-polling-seconds": {
                "title": "Camera Motion Polling (seconds)",
                "type": "integer",
                "minimum": 0,
                "placeholder": "15",
                "description": "Camera motion detection does not update live and must be fetched periodically. By default this is done every 20 seconds"
            },
            "logging": {
                "title": "Advanced Logging",
                "type": "string",
                "oneOf": [
                    {
                        "title": "Verbose",
                        "enum": [
                            "verbose"
                        ]
                    },
                    {
                        "title": "Debug",
                        "enum": [
                            "debug"
                        ]
                    }
                ]
            },
            "enable-startup-diagnostic": {
                "title": "Enable Diagnostic Logging on startup",
                "default": false,
                "type": "boolean"
            }
        },
        "required": [
            "name"
        ]
    },
    "layout": [
        {
            "key": "name",
            "title": "Name"
        },
        {
            "key": "username",
            "title": "Credentials",
            "placeholder": "user@example.com"
        },
        {
            "key": "password",
            "placeholder": "password",
            "notitle": true
        },
        {
            "key": "pin",
            "placeholder": "2FA pin",
            "notitle": true
        },
        {
            "type": "section",
            "title": "Blink OAuth",
            "expandable": true,
            "expanded": false,
            "items": [
                "signInStatus",
                "hardwareId",
                "redirectPort",
                "oauthClientId",
                "oauthScope",
                "accessToken",
                "refreshToken",
                "tokenExpiresAt",
                "accountId",
                "clientId",
                "region"
            ]
        },
        {
            "type": "section",
            "title": "Features",
            "expandable": true,
            "expanded": false,
            "items": [
                "hide-alarm",
                "hide-manual-arm-switch",
                "hide-enabled-switch",
                "hide-privacy-switch",
                "disable-thumbnail-refresh",
                "hide-temperature-sensor",
                "enable-liveview"
            ]
        },
        {
            "type": "section",
            "title": "Advanced Settings",
            "expandable": true,
            "expanded": false,
            "items": [
                "camera-thumbnail-refresh-seconds",
                "camera-status-polling-seconds",
                "camera-motion-polling-seconds",
                "logging",
                "enable-startup-diagnostic"
            ]
        }
    ]
}
