{
    "pluginAlias": "Blink",
    "pluginType": "platform",
    "customUi": true,
    "singular": true,
    "schema": {
        "type": "object",
        "properties": {
            "name": {
                "title": "Name",
                "default": "Blink",
                "type": "string"
            },
            "hardwareId": {
                "title": "Hardware ID",
                "type": "string",
                "description": "Device identifier associated with your Blink session. Re-use the ID that was used when generating the tokens, or leave blank to let the plugin reuse its last value."
            },
            "username": {
                "title": "Blink Email (optional)",
                "type": "string",
                "description": "Provide your Blink account email if you want the plugin to request fresh tokens automatically."
            },
            "password": {
                "title": "Blink Password (optional)",
                "type": "string",
                "format": "password",
                "description": "Blink account password, only required if you want the plugin to request new tokens on its own."
            },
            "pin": {
                "title": "2FA PIN (optional)",
                "type": "string",
                "description": "One-time verification PIN from Blink (email/SMS). Supply this after a new login challenge."
            },
            "otp": {
                "title": "2FA Code (optional)",
                "type": "string",
                "description": "If Blink provides an additional verification/OTP code, enter it here. Also accepts values supplied as twoFactorCode/twoFactorToken."
            },
            "accessToken": {
                "title": "Access Token",
                "type": "string",
                "description": "Paste the Blink access_token captured from your own device.",
                "format": "textarea"
            },
            "refreshToken": {
                "title": "Refresh Token",
                "type": "string",
                "description": "Paste the Blink refresh_token captured from your own device. The plugin uses this to keep the session fresh.",
                "format": "textarea"
            },
            "tokenExpiresAt": {
                "title": "Token Expiry (ms)",
                "type": "number",
                "readOnly": true
            },
            "accountId": {
                "title": "Blink Account ID",
                "type": "number",
                "readOnly": true
            },
            "clientId": {
                "title": "Blink Client ID",
                "type": "number",
                "readOnly": true
            },
            "region": {
                "title": "Blink Region",
                "type": "string",
                "readOnly": true
            },
            "tokenScope": {
                "title": "Token Scope",
                "type": "string",
                "readOnly": true
            },
            "tokenType": {
                "title": "Token Type",
                "type": "string",
                "readOnly": true
            },
            "sessionId": {
                "title": "Session ID",
                "type": "string",
                "readOnly": true
            },
            "oauthClientId": {
                "title": "OAuth Client ID",
                "type": "string",
                "readOnly": true
            },
            "tokenHeaders": {
                "title": "Captured Token Headers",
                "type": "object",
                "readOnly": true
            },
            "ffmpegPath": {
                "title": "FFmpeg Path",
                "type": "string",
                "default": "/usr/bin/ffmpeg",
                "description": "Optional absolute path to ffmpeg binary. If empty, plugin will attempt /usr/bin/ffmpeg."
            },
            "hide-alarm": {
                "title": "Hide Alarm (Security System)",
                "placeholder": true,
                "description": "When combined with the arm switch (used or automation), the Security-System will have to be controlled by Blink App.",
                "type": "boolean"
            },
            "hide-manual-arm-switch": {
                "title": "Hide Sync Module Arm Switch",
                "placeholder": true,
                "description": "The Sync Module Arm switch allows for automations to arm / disarm all cameras associated with a sync module",
                "type": "boolean"
            },
            "hide-temperature-sensor": {
                "title": "Hide Camera Temperature Sensors",
                "placeholder": false,
                "type": "boolean"
            },
            "hide-enabled-switch": {
                "title": "Hide Camera Motion Enabled/Disable Switch",
                "placeholder": false,
                "type": "boolean"
            },
            "hide-privacy-switch": {
                "title": "Hide Camera Privacy-Mode Enable/Disable Switch",
                "placeholder": false,
                "description": "Privacy-Mode prevents thumbnails from refreshing when the Security-System is not armed. Disabling this switch will globally disable privacy-mode on all cameras.",
                "type": "boolean"
            },
            "enable-liveview": {
                "title": "Enable LiveView when clicking on a camera feed (experimental)",
                "placeholder": false,
                "description": "By default, the camera view will expose the last recorded motion. Enabling live view will enable the experimental liveview relay",
                "type": "boolean"
            },
            "disable-thumbnail-refresh": {
                "title": "Disable thumbnail auto-refresh",
                "default": false,
                "description": "By default, the thumbnails of the cameras will refresh when the camera is enabled, disabling the auto refresh keeps the default thumbnail untouched.",
                "type": "boolean"
            },
            "camera-thumbnail-refresh-seconds": {
                "title": "Camera Thumbnail Refresh (seconds)",
                "type": "integer",
                "minimum": 0,
                "placeholder": "3600",
                "description": "Force Thumbnail refresh every N seconds. If auto refresh is disabled, this value is ignored."
            },
            "camera-status-polling-seconds": {
                "title": "Status Polling (seconds)",
                "type": "integer",
                "minimum": 1,
                "placeholder": "30",
                "description": "Camera status does not update live and must be fetched periodically. By default this is done every 45 seconds"
            },
            "camera-motion-polling-seconds": {
                "title": "Camera Motion Polling (seconds)",
                "type": "integer",
                "minimum": 0,
                "placeholder": "15",
                "description": "Camera motion detection does not update live and must be fetched periodically. By default this is done every 20 seconds"
            },
            "logging": {
                "title": "Advanced Logging",
                "type": "string",
                "oneOf": [
                    {
                        "title": "Verbose",
                        "enum": [
                            "verbose"
                        ]
                    },
                    {
                        "title": "Debug",
                        "enum": [
                            "debug"
                        ]
                    }
                ]
            },
            "enable-startup-diagnostic": {
                "title": "Enable Diagnostic Logging on startup",
                "default": false,
                "type": "boolean"
            }
        },
        "required": [
            "name"
        ]
    },
    "layout": [
        {
            "key": "name",
            "title": "Name"
        },
        {
            "type": "section",
            "title": "Blink Credentials (optional)",
            "expandable": true,
            "expanded": false,
            "items": [
                "username",
                {
                    "key": "password",
                    "type": "password"
                },
                "pin",
                "otp"
            ]
        },
        {
            "type": "section",
            "title": "Blink Tokens",
            "expandable": false,
            "items": [
                {
                    "key": "accessToken",
                    "type": "textarea",
                    "placeholder": "Paste your Blink access_token"
                },
                {
                    "key": "refreshToken",
                    "type": "textarea",
                    "placeholder": "Paste your Blink refresh_token"
                },
                "hardwareId",
                "tokenExpiresAt",
                "accountId",
                "clientId",
                "region",
                "tokenScope",
                "tokenType",
                "sessionId",
                "oauthClientId"
            ]
        },
        {
            "type": "section",
            "title": "Features",
            "expandable": true,
            "expanded": false,
            "items": [
                "hide-alarm",
                "hide-manual-arm-switch",
                "hide-enabled-switch",
                "hide-privacy-switch",
                "disable-thumbnail-refresh",
                "hide-temperature-sensor",
                "enable-liveview"
            ]
        },
        {
            "type": "section",
            "title": "Advanced Settings",
            "expandable": true,
            "expanded": false,
            "items": [
                "camera-thumbnail-refresh-seconds",
                "camera-status-polling-seconds",
                "camera-motion-polling-seconds",
                "logging",
                "enable-startup-diagnostic",
                "tokenHeaders"
            ]
        }
    ]
}
